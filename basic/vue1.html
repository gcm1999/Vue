<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>nextTick</title>
  </head>
  <body>
    <div id="app">
      <h1>hello,{{name}}</h1>
      <h2 ref="num">{{count}}</h2>
      <button @click="add">+10</button>
    </div>
    <script src="../js/vue.js"></script>

    <script>
      // 阻止vue在启动时生成生产提示
      Vue.config.productionTip = false;

      let app = new Vue({
        //第一种写法
        // el:'#app',
        // data:{
        //     name:'gcm',
        // }

        //第二种写法
        // data:function(){
        //     return{
        //         name: "gcm",
        //     }
        // }
        data() {
          return {
            name: "gcm",
            count: 0,
          };
        },
        methods: {
          async add() {
            const num = this.count;
            for (let i = num; i < num + 11; i++) {
              this.updateCount(i);
            }
            // console.log(await this.$nextTick());
            // console.log(this.$refs.num);
            // console.log("111:" + this.$refs.num.innerText);
            // this.$nextTick(() => {
            //   console.log("222:" + this.$refs.num.innerText);
            // });
          },
          updateCount(i) {
            this.count = i;
          },
        },
        watch: {
          count: {
            handler(newValue, oldValue) {
              console.log("new:" + newValue);
              console.log("old", oldValue);
              //   console.log("watch:"+this.$refs.num.innerText);
              //   this.$nextTick(() => {
              //   console.log("nextTick:"+this.$refs.num.innerText);
              // });
            },
          },
        },
      });
      //第二种写法
      app.$mount("#app");
    </script>
  </body>
</html>
